ACME-DNS module for Caddy
===========================

This package contains a DNS provider module for [Caddy](https://github.com/caddyserver/caddy). It can be used to solve DNS challenge records with [ACME-DNS](https://github.com/joohoi/acme-dns) server.

## Caddy module name

```
dns.providers.acmedns
```

## Config examples

To use this module for DNS challenge, you'll need a credentials file generated by [acme-dns-client](https://github.com/acme-dns/acme-dns-client). Use the CLI to register your domain with ACME-DNS server and create appropriate CNAME records from `_acme-challenge.your.domain.com` to address provided by `acme-dns-client`. The client stores the file with credentials at path `/etc/acmedns/clientstorage.json`. This is the file you will need to point to in Caddyfile.

If you don't want to use `acme-dns-client`, you can manually register an account using ACME-DNS `/register` endpoint directly:

`curl -X POST <ACME-DNS server address>/register`

This endpoint will return `username`, `password`, `subdomain` and `fulldomain` fields. Use them to create a new JSON file that should look like this:
```json
{
	"your.domain.example.com": {
		"username": "<username UUID>",
		"password": "<password string>",
		"subdomain": "<subdomain UUID>",
		"fulldomain": "<subdomain UUID>.<ACME-DNS server address>",
		"server_url": "<URL to ACME-DNS server API>"
	}
}
```

Then [configure the ACME issuer in your Caddy JSON](https://caddyserver.com/docs/json/apps/tls/automation/policies/issuer/acme/) like so:

```json
{
	"module": "acme",
	"challenges": {
		"dns": {
			"provider": {
				"name": "acmedns",
				"config_file_path": "/path/to/config.json"
			}
		}
	}
}
```

or with the Caddyfile:

```
# globally
{
	acme_dns acmedns /path/to/config.json
}
```

```
# one site
tls {
	dns acmedns /path/to/config.json
}
```
